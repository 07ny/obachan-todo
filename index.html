<!DOCTYPE html>
<html lang="ja">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <meta charset="UTF-8">
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-HMK557QQJT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-HMK557QQJT');
</script>

  <title>おばちゃんメモ</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Noto Sans JP', sans-serif;
      background-color: #fdeee8;
      padding: 20px 10px;
    }

    h1 {
      text-align: center;
      margin-bottom: 8px;
      color: #ff8a65;
    }

    .subtitle {
      text-align: center;
      color: #666;
      font-size: 14px;
      margin-bottom: 24px;
      line-height: 1.6;
    }

    .container {
      max-width: 480px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      box-sizing: border-box;
    }

    /* ========== 認証モーダル ========== */
    #authModal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    #authModal.show {
      display: flex;
    }

    .auth-container {
      background: white;
      padding: 30px;
      border-radius: 16px;
      max-width: 400px;
      width: 90%;
      box-shadow: 0 10px 40px rgba(0,0,0,0.3);
    }

    .auth-container h2 {
      text-align: center;
      color: #ff8a65;
      margin-bottom: 20px;
    }

    .auth-tabs {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-bottom: 20px;
    }

    .auth-tab {
      background-color: #eee;
      color: #666;
      border-radius: 20px;
      padding: 10px 24px;
      border: none;
      cursor: pointer;
      font-size: 14px;
      min-height: 44px;
    }

    .auth-tab.active {
      background-color: #ff8a65;
      color: white;
    }

    .auth-form {
      margin-bottom: 20px;
    }

    .form-group {
      margin-bottom: 16px;
      text-align: left;
    }

    .form-group label {
      display: block;
      font-size: 13px;
      color: #666;
      margin-bottom: 6px;
      font-weight: 600;
    }

    .form-group input {
      width: 100%;
      padding: 12px;
      font-size: 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      box-sizing: border-box;
      outline: none;
    }

    .form-group input:focus {
      border-color: #ff8a65;
    }

    .auth-submit-btn {
      width: 100%;
      padding: 14px;
      font-size: 16px;
      font-weight: 600;
      background-color: #ff8a65;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      min-height: 48px;
    }

    .auth-submit-btn:hover {
      background-color: #ff7043;
    }

    .auth-error {
      color: #d9534f;
      font-size: 13px;
      margin-top: 10px;
      min-height: 20px;
      text-align: center;
    }

    .auth-close {
      text-align: center;
      margin-top: 15px;
    }

    .auth-close button {
      background: none;
      border: none;
      color: #999;
      cursor: pointer;
      font-size: 14px;
      text-decoration: underline;
    }

    /* ========== アプリ画面（既存） ========== */
    .input-area {
      display: flex;
      gap: 8px;
      margin-bottom: 24px;
    }

    #todoInput {
      flex: 1;
      padding: 10px 12px;
      font-size: 16px;
      border: 1px solid #ddd;
      border-radius: 8px;
      outline: none;
    }

    #todoInput:focus {
      border-color: #ff8a65;
    }

    #addButton {
      padding: 10px 16px;
      font-size: 14px;
      border: none;
      border-radius: 8px;
      background-color: #ff8a65;
      color: white;
      cursor: pointer;
    }

    .todo-section {
      margin-top: 24px;
    }

    .todo-section h2 {
      font-size: 16px;
      margin-bottom: 8px;
      color: #ff8a65;
    }

    .todo-section ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .todo-item {
      display: flex;
      align-items: center;
      padding: 10px 12px;
      background-color: #ffffff;
      border-radius: 8px;
      margin-bottom: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      transition: transform 0.2s ease;
    }

    .todo-item:hover {
      transform: translateY(-1px);
      box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    }

    .todo-item.completed {
      background-color: #f0f0f0;
    }

    /* 完了時のアニメーション */
    .todo-item.celebrate {
      animation: completeEffect 0.4s ease;
    }

    @keyframes completeEffect {
      0% { transform: scale(1); }
      50% { 
        transform: scale(1.05);
        background-color: #fff9e6;
      }
      100% { transform: scale(1); }
    }

    .checkbox input {
      display: none;
    }

    .checkbox {
      cursor: pointer;
    }

    .checkmark {
      width: 20px;
      height: 20px;
      background-color: #eee;
      border-radius: 4px;
      display: inline-block;
      position: relative;
      transition: all 0.3s ease;
    }

    .checkbox input:checked + .checkmark {
      background-color: #ff8a65;
    }

    .checkbox input:checked + .checkmark::after {
      content: "";
      position: absolute;
      left: 6px;
      top: 2px;
      width: 6px;
      height: 12px;
      border: solid white;
      border-width: 0 2px 2px 0;
      transform: rotate(45deg);
    }

    .todo-text {
      font-size: 14px;
    }

    .todo-item.completed .todo-text {
      text-decoration: line-through;
      color: gray;
    }

    button {
      padding: 6px 10px;
      border: none;
      border-radius: 6px;
      background-color: #8cbce9;
      color: white;
      cursor: pointer;
    }

    .edit-btn {
      background-color: #f0ad4e;
      font-size: 14px;
    }
    .delete-btn {
      background-color: #d9534f;
      opacity: 0.9;
    }
    .todo-content{
        flex: 1;
        min-width:0;
        overflow: hidden;
    }
    .todo-text{
        font-size:14px;
        display:block;
        word-wrap:break-word;
        overflow-wrap:break-word;
        white-space:normal;
    }
    .tab-area{
        display:flex;
        gap:10px;
        justify-content:center;
        margin-bottom:20px;
    }
    .tab-btn{
        background-color: #eee;
        color: #666;
        border-radius: 20px;
        padding: 8px 16px;
    }
    .tab-btn.active{
        background-color: #ff8a65;
        color: white;
    }
    .ai-placeholder{
        color:#999;
        font-style: italic;
    }
    .ai-box{
        display:flex;
        align-items: flex-start;
        gap: 12px;
        margin-bottom: 20px;
        position: relative;
    }
    .ai-avatar{
        width: 100px;
        height: 100px;
        border-radius: 50%;
        object-fit: cover;
        box-shadow: 0 6px 15px rgba(0,0,0,0.25);
    }
    #aiMessage{
        flex: 1;
        text-align:center;
        color:#ff8a65;
        font-style: italic;
        font-weight: bold;
        background-color: #fff9f5;
        padding: 10px 10px;
        border-radius: 12px;
        position: relative;

        min-height: 1.5em;
        height: auto;
        margin-bottom: 20px;
        display: inline-block;
        width: fit-content;
        max-width: 100%;
        word-wrap: break-word;
        overflow-wrap: break-word;
        line-height: 1.5;
        white-space: pre-line; 
    }

    /* 吹き出しの三角 */
    #aiMessage::before {
      content: '';
      position: absolute;
      left: -8px;
      top: 20px;
      width: 0;
      height: 0;
      border-top: 8px solid transparent;
      border-bottom: 8px solid transparent;
      border-right: 8px solid #fff9f5;
    }

    .ai-placeholder{
        color:#999;
        font-style: italic;
    }
    .thinking{
        animation:bounce 1s infinite;
    }
    @keyframes bounce {
        0%, 100% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-10px);
        }
    }
    button, .tab-btn, .edit-btn, .delete-btn {
      min-height: 44px;
      min-width: 44px;
    }

    /* アカウント登録エリア */
    .account-area {
      text-align: center;
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid #eee;
    }

    .account-status {
      font-size: 12px;
      color: #999;
      margin-bottom: 12px;
    }

    .register-btn {
      background-color: #ff8a65;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      min-height: 44px;
    }

    .register-btn:hover {
      background-color: #ff7043;
    }

    .logout-btn {
      background-color: #fff;
      color: #999;
      border: 1px solid #ddd;
      padding: 8px 16px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 13px;
      margin-top: 8px;
    }

    .user-email {
      font-size: 13px;
      color: #ff8a65;
      font-weight: 600;
      margin-bottom: 8px;
    }

  </style>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

</head>

<body>

  <!-- ========== メインアプリ画面 ========== -->
  <div class="container">
    <h1>おばちゃんメモ</h1>
    <p class="subtitle">やる気が出ないあなたを、AIおばちゃんが優しく励ますTODOアプリ</p>

    <div class="ai-box">
        <img
            id="aiAvatar"
            src="thinking.png"
            alt="AIキャラ"
            class="ai-avatar"
        >
        <p id="aiMessage" class="ai-placeholder">
            TODOを入力するとAIが応援するよ！
        </p>
    </div>

    <div class="input-area">
      <input id="todoInput" type="text" placeholder="TODOを入力">
      <button id="addButton" class="add-btn">追加</button>
    </div>

    <div class="tab-area">
        <button class="tab-btn active" data-filter="all">すべて</button>
        <button class="tab-btn" data-filter="active">未完了</button>
        <button class="tab-btn" data-filter="completed">完了</button>
    </div>

    <div class="todo-section">
      <h2>未完了のTODO (<span id="activeCount">0</span>)</h2>
      <ul id="todoListActive"></ul>
    </div>

    <div class="todo-section">
      <h2>完了したTODO (<span id="completedCount">0</span>)</h2>
      <ul id="todoListCompleted"></ul>
    </div>

    <!-- アカウント登録エリア -->
    <div class="account-area">
      <div id="guestStatus">
        <p class="account-status">
          <i class="fa-solid fa-user-secret"></i> ゲストとして利用中
        </p>
        <button id="registerBtn" class="register-btn">
          <i class="fa-solid fa-envelope"></i> メールアドレスで登録してデータを保存
        </button>
      </div>
      
      <div id="userStatus" style="display: none;">
        <p class="user-email" id="userEmail"></p>
        <button id="logoutBtn" class="logout-btn">
          <i class="fa-solid fa-right-from-bracket"></i> ログアウト
        </button>
      </div>
    </div>
  </div>

  <!-- ========== 認証モーダル ========== -->
  <div id="authModal">
    <div class="auth-container">
      <h2>アカウント登録</h2>
      
      <!-- タブ切り替え -->
      <div class="auth-tabs">
        <button class="auth-tab active" data-mode="signup">新規登録</button>
        <button class="auth-tab" data-mode="login">ログイン</button>
      </div>
      
      <!-- ログイン/新規登録フォーム -->
      <form id="authForm" class="auth-form">
        <div class="form-group">
          <label for="email">メールアドレス</label>
          <input type="email" id="email" required placeholder="example@email.com">
        </div>
        
        <div class="form-group">
          <label for="password">パスワード</label>
          <input type="password" id="password" required placeholder="6文字以上" minlength="6">
        </div>
        
        <button type="submit" id="authSubmitBtn" class="auth-submit-btn">新規登録</button>
        
        <p class="auth-error" id="authError"></p>
      </form>
      
      <div class="auth-close">
        <button id="closeAuthBtn">あとで登録する</button>
      </div>
    </div>
  </div>

<script type="module" src="script.js"></script>
</body>
</html>